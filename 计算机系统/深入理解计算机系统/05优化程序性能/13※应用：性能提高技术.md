## 应用：性能提高技术

​		虽然只考虑了有限的一组应用程序，但是我们能得出关于如何编写高效代码的很重要 的经验教训。我们已经描述了许多优化程序性能的基本策略：
​	1)	**高级设计**。为遇到的问题选择适当的算法和数据结构。要特别警觉，避免使用那些会渐进地产生糟糕性能的算法或编码技术。
​	2)	**基本编码原则**。避免限制优化的因素，这样编译器就能产生高效的代码。

- <u>消除连续的函数调用</u>。在可能时，将计算移到循环外。考虑有选择地妥协程序的模块性以获得更大的效率。
- <u>消除不必要的内存引用</u>。引入临时变量来保存中间结果。只有在最后的值计算出来时，才将结果存放到数组或全局变量中。

​    3)**低级优化**。结构化代码以利用硬件功能。

- <u>展开循环，降低开销，并且使得进一步的优化成为可能。</u>
- <u>通过使用例如多个累积变量和重新结合等技术，找到方法提高指令级并行。</u>
- <u>用功能性的风格重写条件操作，使得编译采用条件数据传送。</u>

​        最后要给读者一个忠告，要警惕，在为了提高效率重写程序时避免引入错误。在引入新变量、改变循环边界和使得代码整体上更复杂时，很容易犯错误。一项有用的技术是在优化函数时，用检查代码来测试函数的每个版本，以确保在这个过程没有引入错误。检查代码对函数的新版本实施一系列的测试，确保它们产生与原来一样的结果。对于高度优化的代码，这组测试情况必须变得更加广泛，因为要考虑的情况也更多。例如，使用循环展开的检查代码需要测试许多不同的循环界限，保证它能够处理最终单步迭代所需要的所有不同的可能的数字。