## 处理器体系结构

​		现代微处理器可以称得上是人类创造出的最复杂的系统之一。一块手指甲大小的硅片上，可以容纳一个完整的高性能处理器、大的高速缓存，以及用来连接到外部设备的逻辑电路。从性能上来说，今天在一块芯片上实现的处理器已经使 20 年前价值 1000 万美元、 房间那么大的超级计算机相形见绌了。即使是在像手机、导航系统和可编程恒温器这样的日常设备中的嵌人式处理器，也比早期计算机开发者所能想到的强大得多。

​		到目前为止，我们看到的计算机系统只限于机器语言程序级。我们知道处理器必须执行一系列指令，每条指令执行某个简单操作，例如两个数相加。指令被编码为由一个或多个字节序列组成的二进制格式。一个处理器支持的指令和指令的字节级编码称为它的指令**集体系结构（Instruction-Set Architecture，ISA)**。不同的处理器“家族”，例如 Inte丨IA32 和 x86-64 、IBM / FreescalePower 和 ARM 处理器家族，都有不同的ISA。—个程序编译 成在一种机器上运行，就不能在另一种机器上运行。另外，同一个家族里也有很多不同型号的处理器。虽然每个厂商制造的处理器性能和复杂性不断提高，但是不同的型号在ISA级别上都保持着兼容。一些常见的处理器家族(例如X86-64)中的处理器分别由多个厂商提供。因此，ISA 在编译器编写者和处理器设计人员之间提供了一个概念抽象层，编译器编写者只需要知道允许哪些指令，以及它们是如何编码的；而处理器设计者必须建造出执行这些指令的处理器。

​		本章将简要介绍处理器硬件的设计。我们将研究一个硬件系统执行某种 ISA 指令的方 式。这会使你能更好地理解计算机是如何工作的，以及计算机制造商们面临的技术挑战B 一个很重要的概念是，现代处理器的实际工作方式可能跟ISA隐含的计算模型大相径庭。 ISA模型看上去应该是顺序指令执行，也就是先取出一条指令，等到它执行完毕，再开始 下一条。然而，与一个时刻只执行一条指令相比，通过同时处理多条指令的不同部分，处 理器可以获得更高的性能。为了保证处理器能得到同顺序执行相同的结果，人们采用了一 些特殊的机制。在计算机科学中，用巧妙的方法在提高性能的同时又保持一个更简单、更 抽象模型的功能，这种思想是众所周知的。在Web浏览器或平衡二叉树和哈希表这样的 信息检索数据结构中使用缓存，就是这样的例子。

​		你很可能永远都不会自己设计处理器。这是专家们的任务，他们工作在全球不到1〇〇 家的公司里。那么为什么你还应该了解处理器设计呢？

- **从智力方面来说，处理器设计是非常有趣而且很重要的。**学习事物是怎样工作的 有其内在价值。了解作为计算机科学家和工程师日常生活一部分的一个系统的内 部工作原理（特别是对很多人来说这还是个谜），是件格外有趣的事情。处理器设 计包括许多好的工程实践原理。它需要完成复杂的任务，而结构又要尽可能简单 和规则。
- **理解处理器如何工作能帮助理解整个计算机系统如何工作。**在第6章，我们将讲述 存储器系统，以及用来创建很大的内存映像同时又有快速访问时间的技术。看看处 理器端的处理器——内存接口，会使那些讲述更加完整。