[TOC]



# 光线追踪-1-(Whitted-Style Ray Tracing)

![08光线追踪1](./image/08光线追踪1.png)



### 1.1 为什么需要光线追踪？

​		这里常用之对比的是光栅化。<u>光栅化是把场景中的物体独立出来，并且再将物体独立成一个个的三角形面片进行渲染，通常 GPU 绘制三角形面片是并行的，所以对于物体来说，它是不知道自己周围的物体，同样的，对于三角形面片来说，它也是不知道自己周围的三角形。所以光栅化无法处理一类需要全局信息进行渲染的效果，如：`软阴影`、`Glossy 反射`以及`间接照明`</u>：

![image.png](https://bbs-img.huaweicloud.com/blogs/img/20220510/1652144078603968571.png)

​		相比较光栅化，光线追踪是从相机出发，计算相机发出的光线（视线）与场景产生的结果，这里的光线可能会与场景中的物体碰撞后生成另外一些光线，然后生成的光线也需要继续做计算。所以对于光线追踪来说，相机产生的光线是知道整个场景信息的。

光栅化与光线追踪的对比：

1. 光栅化快，实时，是一种近似算法
2. 光纤追踪慢，离线，是一种准确的算法

### 1.2 光线

光线追踪需要光线的概念，课程以三个假设引入了光线的概念：

1. 光线沿着直线传播
2. 光线之间不会碰撞
3. 光线的可逆性。光线在场景中传播，产生反弹，假设反弹至相机，那么从相机视角来看，一定可以沿着传播的路径找到光源位置

### 1.3 光线投射（Ray Casting）

光线投射的过程如下：

1. 从相机位置，向物体投射一条光线用于成像
2. 从像素中对应物体的每个位置投射回光线，检查是否在阴影中（类似 Shadow Mapping）

![image.png](https://bbs-img.huaweicloud.com/blogs/img/20220510/1652144520207252210.png)

### 1.4 常规的着色过程

从视点发射一条光线，通过成像平面（某个像素）投射至物体，然后从物体发出光线至光源检查其是否在阴影中，如果不在阴影中，就可以通过某些着色方案对这个像素进行着色，如 Blinn Phong 等。
![image.png](https://bbs-img.huaweicloud.com/blogs/img/20220510/1652144808536241579.png)

不同于常规的着色过程，下面介绍了一种递归的光线追踪方法`Recursive (Whitted-Style) Ray Tracing`。