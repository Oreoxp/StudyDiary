[TOC]



# 空间配置器

​		allocator 是空间配置器，定义于头文件 std::allocator 类模板是所有标准库容器所用的默认分配器 (Allocator)，若不提供用户指定的分配器。默认分配器无状态，即任何给定的 allocator 实例可交换、比较相等，且能解分配同一 `allocator` 类型的任何其他实例所分配的内存。

## 空间配置器的标准接口

根据 STL 的规范，以下是 allocator 的必要接口：

成员类型：

| 类型                                          | 定义                                                         |
| :-------------------------------------------- | :----------------------------------------------------------- |
| value_type                                    | T                                                            |
| pointer (C++17 中弃用)(C++20 中移除)          | T*                                                           |
| const_pointer (C++17 中弃用)(C++20 中移除)    | const T*                                                     |
| reference (C++17 中弃用)(C++20 中移除)        | T&                                                           |
| const_reference (C++17 中弃用)(C++20 中移除)  | const T&                                                     |
| size_type                                     | std::size_t                                                  |
| difference_type                               | std::ptrdiff_t                                               |
| propagate_on_container_move_assignment(C++14) | std::true_type                                               |
| rebind (C++17 中弃用)(C++20 中移除)           | template< class U > struct rebind { typedef allocator other; }; |
| is_always_equal(C++17)                        | std::true_type                                               |

成员函数：

| 函数                                  | 定义                                                         |
| :------------------------------------ | :----------------------------------------------------------- |
| (构造函数)                            | 创建新的 allocator 实例(公开成员函数)                        |
| (析构函数)                            | 析构 allocator 实例(公开成员函数)                            |
| address(C++17 中弃用)(C++20 中移除)   | 获得对象的地址，即使重载了 operator&(公开成员函数)           |
| allocate                              | 分配未初始化的存储，<u>相当于分配一大块内存</u>   (公开成员函数) |
| deallocate                            | 解分配存储，<u>将一大块内存析构</u>(公开成员函数)            |
| max_size(C++17 中弃用)(C++20 中移除)  | 返回最大的受支持分配大小(公开成员函数)                       |
| construct(C++17 中弃用)(C++20 中移除) | 在分配的存储构造对象，构造一个个对象   (公开成员函数)        |
| destroy(C++17 中弃用)(C++20 中移除)   | 析构在已分配存储中的对象，析构一个个对象(公开成员函数)       |



## 简单实现































